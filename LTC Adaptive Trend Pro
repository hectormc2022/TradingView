// Para LTH -

//@version=5
indicator("LTC Adaptive Trend Pro", shorttitle="LTC TrendPro", overlay=true)

// Inputs
atrPeriod = input.int(10, "Período ATR")
mult = input.float(2.5, "Multiplicador ATR")
emaLen = input.int(200, "EMA Largo Plazo")

// Cálculos base
ema200 = ta.ema(close, emaLen)
atr = ta.atr(atrPeriod)
upperBand = close + mult * atr
lowerBand = close - mult * atr

// Lógica SuperTrend
var float trend = na
var bool upTrend = na

if na(trend)
    trend := close
    upTrend := true
else
    if close > trend
        upTrend := true
    else if close < trend
        upTrend := false

trend := upTrend ? math.max(lowerBand, trend) : math.min(upperBand, trend)

// Colores dinámicos
trendColor = upTrend ? color.new(color.lime, 0) : color.new(color.red, 0)

// Plots
plot(ema200, title="EMA 200", color=color.new(color.orange, 0), linewidth=2)
plot(trend, title="Línea de Tendencia", color=trendColor, linewidth=2, style=plot.style_line)
bgcolor(upTrend ? color.new(color.green, 90) : color.new(color.red, 90))

// Señales visuales
longSignal = ta.crossover(close, trend) and close > ema200
shortSignal = ta.crossunder(close, trend) and close < ema200

plotshape(longSignal, title="Entrada Long", location=location.belowbar, style=shape.triangleup, color=color.new(color.green, 0), size=size.tiny, text="BUY")
plotshape(shortSignal, title="Entrada Short", location=location.abovebar, style=shape.triangledown, color=color.new(color.red, 0), size=size.tiny, text="SELL")

// Alertas
alertcondition(longSignal, title="Señal de Compra LTC", message="Señal de compra en LTC/USD")
alertcondition(shortSignal, title="Señal de Venta LTC", message="Señal de venta en LTC/USD")
